import { Store } from 'modules/Flux';
import XHR, { Methods } from './XHR';
import Actions from './ApiActions';

export class Video extends Store {
  constructor() {
    super();

    this.id = 'video';
    this.listenables = Actions;
  }

  /**
   * Загрузка видео
   * @param blob
   * @param title
   * @param description
   * @returns {Promise.<void>}
   */
  async onUploadVideo(blob, title, description) {
    const body = new FormData();
    body.append('file', blob);
    body.append('title', title);
    body.append('description', description);

    const { responseData } = await XHR(Methods.POST, {
      body,
      path: '/api/uploadVideo',
      encode: 'binary' });
  }
}

export default new Video();
