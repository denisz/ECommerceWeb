import { Store } from 'modules/Flux';
import Actions from './SettingsActions';
import XHR, { Methods } from './XHR';

export class Settings extends Store {
  constructor() {
    super();

    this.id = 'settings';
    this.listenables = Actions;
  }

  get banners() {
    return this.get('banners', []);
  }

  async onFetch() {
    const { responseData } = await XHR(Methods.POST, { path: 'settings' });
    this.setState(this.state, responseData);
  }

  async onFetchIfNeeded() {
    if (this.isEmpty()) {
      return this.onFetch()
    }
  }
}

export default new Settings();
