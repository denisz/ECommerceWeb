import React from 'react';
import ComboBox from 'components/ComboBox';
import TextField from 'components/TextField';
import OrderView from 'components/OrderView';
import Toolbar from 'components/DialogToolbar';
import {DialogComponent, Form, FormGroupValidate} from 'modules/Form';
import './OrderEdit.css';
import * as keys from './constants';

export default class OrderEdit extends DialogComponent {
  render() {
    const {form} = this.state;

    return (
        <div className="OrderEdit">

          <OrderView
              positions={form.getObject(keys.kPositionsKey, [])}
              discount={form.getObject(keys.kDiscountKey, {})}
              delivery={form.getObject(keys.kDeliveryKey)}
              total={form.getObject(keys.kTotalKey)}
              subtotal={form.getObject(keys.kSubtotalKey)}
              productPrice={form.getObject(keys.kProductPriceKey)}
              deliveryPrice={form.getObject(keys.kDeliveryPriceKey)}
              address={form.getObject(keys.kAddressKey, {})}
          />

          <Form method="post">
            <FormGroupValidate tabindex={0}
                               className="form-group"
                               ref={keys.kDiscountKey}>
              <TextField required
                         name="name"
                         autoComplete="name"
                         placeholder="Скидка"
                         value={form.getObject(keys.kDiscountKey)}
                         onChange={form.wrapperChange(keys.kDiscountKey)}
              />
            </FormGroupValidate>

            <FormGroupValidate tabindex={1}
                               className="form-group"
                               ref={keys.kStatusKey}>
              <ComboBox name="region"
                        autoComplete="shipping address-level1"
                        placeholder="Статус"
                        choices={keys.statuses}
                        value={form.getObject(keys.kStatusKey)}
                        onChange={form.wrapperChange(keys.kStatusKey)}/>
            </FormGroupValidate>
          </Form>

          <Toolbar onSubmit={this.onSubmit} onCancel={this.onCancel} />
        </div>
    );
  }
}

OrderEdit.propTypes = {};
OrderEdit.defaultProps = {};
