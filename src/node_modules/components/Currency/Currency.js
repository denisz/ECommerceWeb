import React from 'react';
import cx from 'classnames';
import symbols from './symbols';
import './Currency.css';
import { Percentage, FixedAmount } from './discount';

const getValueWithDiscount = ({ discount, value, amount }) => {
  if (discount) {
    switch (discount.type) {
      case Percentage:
        return (value - (value * (discount.amount / 100))).toFixed(0) * amount;
      case FixedAmount:
        return (value - discount.amount).toFixed(0) * amount;
      default:
        return ''
    }
  }

  return ''
};

const getValueWithoutDiscount = ({ value, amount }) => {
  return value * amount
};

export default ({ discount, value = 0, amount = 1, currency = 'RUB' }) => (
  <div className={cx('Currency')}>
        <span className={cx({
          'Currency-strikethrough': !!discount,
        })}>
          {getValueWithoutDiscount({ value, amount })}<span className="Currency__symbol">{symbols[currency]}</span>
        </span>
    {
      !!discount &&
      <div className={cx({
        'Currency__discount': !!discount,
      })}>
        <span>{getValueWithDiscount({ discount, value, amount })}<span className="Currency__symbol">{symbols[currency]}</span></span>
      </div>
    }

  </div>
);
