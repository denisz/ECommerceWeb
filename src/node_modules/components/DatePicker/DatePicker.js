import React from 'react';
import cx from 'classnames';
import { FormControlValue } from 'modules/Form';
import DayPicker, { DateUtils } from 'react-day-picker';
import DayPickerInput from 'react-day-picker/DayPickerInput'
import 'react-day-picker/lib/style.css';
import './DatePicker.css';

export default ({ value, onChange = ()=>{}, className="form-control", ...rest}) => (
    <DayPicker
        className={className}
        selectedDays={value}
        onDayClick={(date)=>onChange(FormControlValue(date))}
        {...rest}
    />
)

export const DateView = ({ value, className="form-control", ...rest}) => (
    <DayPicker
        className={className}
        value={value}
        {...rest}
    />
);

export const DateInput = ({ value, onChange = ()=>{}, className="form-control", ...rest}) => (
    <DayPickerInput
        className={className}
        value={value}
        onDayChange={(date)=>onChange(FormControlValue(date))}
        {...rest}
    />
);

export const DateRange = ({value:{from, to}, onChange, numberOfMonths=2, className="form-control", ...rest}) => (
    <DayPicker
        className={cx(className, 'DayPicker-Day__selectable')}
        numberOfMonths={numberOfMonths}
        selectedDays={[from, { from, to }]}
        modifiers={{ start: from, end: to }}
        onDayClick={(day)=>onChange(FormControlValue(DateUtils.addDayToRange(day, { from, to })))}
        {...rest}
    />
);