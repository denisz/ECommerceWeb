import React, {Component} from 'react';
import cx from 'classnames';
import Carousel from 'components/Carousel';
import Async from 'components/AsyncComponent';

export default class NavPager extends Component {
  constructor(props) {
    super(props);
    this.state = {};
  }

  handleAfterChange = () => {
    console.log('handleAfterChange');
  };

  handleBeforeChange = () => {
    console.log('handleBeforeChange');
  };

  render() {
    const {adapter, className, ...rest} = this.props;

    return (
        <div className={cx('NavPager', className)}>
          <Carousel {...rest}
                    dots={false}
                    arrows={false}
                    autoplay={false}
                    infinite={false}
                    afterChange={this.handleAfterChange}
                    beforeChange={this.handleBeforeChange}
          >
            {
              adapter.transitions.map(({form, key, ...rest}) => (
                  <div key={key} className="NavPager__item">
                    <Async {...rest}
                           resolve={form}
                           error={() => <div>Ошибка</div>}/>
                  </div>
              ))
            }
          </Carousel>
        </div>
    );
  }
}