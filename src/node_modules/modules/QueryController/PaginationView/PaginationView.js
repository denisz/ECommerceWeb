import React, { Component } from 'react';
import PropTypes from 'prop-types';
import cx from 'classnames';
import './PaginationView.css';
import { times } from 'underscore';
import QueryController from '../QueryController';

export default class PaginationView extends Component {
  render() {
    const { query, minPage, className } = this.props;
    const countPage = query.countPage();
    const currentPage = query.currentPage();// Start with 0
    if (countPage <= minPage) return <div />;

    return <div className={cx('PaginationView', className)}>
      {
        times(countPage, (i)=><div
          key={i}
          onClick={()=>query.loadPage(i, true)}
          className={cx('PaginationView-link',{
            'PaginationView-link-active': currentPage === i,
          })}
        >{i + 1}</div>)
      }
      </div>
  }

}

PaginationView.propTypes = {
  minPage: PropTypes.number,
  className: PropTypes.string,
  query: PropTypes.instanceOf(QueryController).isRequired,
};
PaginationView.defaultProps = {
  minPage: 1,
};
