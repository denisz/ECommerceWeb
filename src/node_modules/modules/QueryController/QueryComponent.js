import { Component } from 'react';
import { QueryController } from 'modules/QueryController';

export default class QueryComponent extends Component {
  constructor(props) {
    super(props);

    this.state = {
      ...this.getInitialState(props),
      query: new QueryController(this, {
        objectsPerPage: props.objectsPerPage,
      }),
    };
  }

  getInitialState() {
    return {};
  }

  componentWillMount() {
    this.state.query.loadObjects();
  }

  componentWillReceiveProps() {
    this.state.query.deferLoadObjects();
  }

  queryObjectsWillLoad(query) {
    this.setState({ query });
  }

  queryObjectsDidLoad(query) {
    this.setState({ query });
  }

  queryForRequest() {
    return null;
  }

  reloadData() {
    this.state.query.fetchCurrentPage();
  }
}
