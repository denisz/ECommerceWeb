import React, { Component } from 'react';
import PropTypes from 'prop-types';
import withStyles from 'isomorphic-style-loader/lib/withStyles';
import s from './ServerError.css';

class ServerError extends Component {
  constructor(props) {
    super(props);

    this.state = {
      error: null,
    };
  }

  componentDidMount() {
    this.props.onRef(this);
  }

  componentWillUnmount() {
    this.props.onRef(undefined);
  }

  setError = (error) => {
    this.setState({ error });
  };

  clearError = () => {
    this.setState({ error: null });
  };

  render() {
    const err = this.state.error || this.props.error;

    if (err) {
      return (<div className={s.root}>{err}</div>);
    }

    return <div className={s.root} />;
  }
}

ServerError.propTypes = {
  error: PropTypes.string,
};
ServerError.defaultProps = {};

export default withStyles(s)(ServerError);
