const isFunction = obj => typeof obj === 'function' || false;

const flatten = (source) => {
  if (Array.isArray(source)) {
    return source.map(flatten);
  }

  if (source.toJSON && isFunction(source.toJSON)) {
    return source.toJSON();
  }

  return source;
};

export default flatten;
